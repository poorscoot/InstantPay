(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{234:function(e,t){e.exports="data:image/png;base64,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"},262:function(e,t,a){e.exports=a(536)},267:function(e,t,a){},269:function(e,t,a){},294:function(e,t){},296:function(e,t){},307:function(e,t){},309:function(e,t){},336:function(e,t){},338:function(e,t){},339:function(e,t){},345:function(e,t){},347:function(e,t){},365:function(e,t){},368:function(e,t){},384:function(e,t){},387:function(e,t){},536:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),s=a.n(o),l=(a(267),a(268),a(6)),i=a(7),c=a(3),u=a(9),p=a(8),h=a(234),m=a.n(h),d=(a(269),a(538)),b=a(539),E=a(45),f=a(544),w=a(40),y=a(14),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){JSON.parse(this.props.logged)&&(window.location.href="/main")}},{key:"componentDidUpdate",value:function(e,t,a){this.props.logged!==e.logged&&JSON.parse(this.props.logged)&&(window.location.href="/main")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary"},r.a.createElement(w.b,{to:"/login"},"Log-in"))),r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary"},r.a.createElement(w.b,{to:"/register"},"Create account"))))}}]),a}(r.a.Component),g=a(543),k=a(545),S=a(105),A=a.n(S),O=a(5),C=a.n(O),j=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onLogin=n.onLogin.bind(Object(c.a)(n)),n.state={errorpwd:""},n}return Object(i.a)(a,[{key:"onLogin",value:function(e){this.setState({errorpwd:""});var t=A.a.createHash("sha256").update(e.password).digest("base64"),a=this.props.changeLoginStatus,n=this.props.setUser,r=this,o=this.props.history;C.a.post("/login",{user:e.user,password:t}).then((function(t){200!==t.status?(r.setState({errorpwd:"An error has ocurred, try again later."}),a(!1)):(a(!0),n(e.user),o.push("/main"))})).catch((function(e){console.log("Error"),r.setState({errorpwd:"An error has ocurred, try again later."})}))}},{key:"render",value:function(){var e={wrapperCol:{offset:7,span:17}};return r.a.createElement("div",null,r.a.createElement(g.a,Object.assign({},{labelCol:{span:12},wrapperCol:{span:12}},{onFinish:this.onLogin}),r.a.createElement(g.a.Item,{name:"user",label:"User",rules:[{required:!0}]},r.a.createElement(k.a,null)),r.a.createElement(g.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password"}]},r.a.createElement(k.a.Password,null)),r.a.createElement(g.a.Item,e,r.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Log-in"),r.a.createElement(E.a,{type:"primary"},r.a.createElement(w.b,{to:"/"},"Return")))),r.a.createElement("div",null,this.state.errorpwd))}}]),a}(r.a.Component),T=a(537),x=a(547),I=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({visible:!0})},n.handleOk=function(e){console.log(e),n.setState({visible:!1})},n.handleCancel=function(e){console.log(e),n.setState({visible:!1})},n.onRegister=n.onRegister.bind(Object(c.a)(n)),n.showModal=n.showModal.bind(Object(c.a)(n)),n.handleOk=n.handleOk.bind(Object(c.a)(n)),n.handleCancel=n.handleCancel.bind(Object(c.a)(n)),n.state={errorpwd:"",logged:!1,visible:!1},n}return Object(i.a)(a,[{key:"onRegister",value:function(e){e.password===e.password2?(this.setState({errorpwd:""}),C.a.post("/register",{user:e.user,password:A.a.createHash("sha256").update(e.password).digest("base64"),bancos:e.bancos,email:e.email,depositaccount:e.bankaccount,prefaccbank:e.prefaccbank,redirecturi:e.redirecturi,shopid:e.shopid}).then((function(e){200!==e.status?this.setState({errorpwd:"An error has ocurred, try again later."}):window.location.href="/login"})).catch((function(e){this.setState({errorpwd:"An error has ocurred, try again later."}),console.log(e)}))):this.setState({errorpwd:"The passwords don't match."})}},{key:"render",value:function(){var e={wrapperCol:{offset:7,span:17}};return r.a.createElement("div",null,r.a.createElement(g.a,Object.assign({},{labelCol:{span:12},wrapperCol:{span:12}},{onFinish:this.onRegister}),r.a.createElement(g.a.Item,{name:"user",label:"User",rules:[{required:!0}]},r.a.createElement(k.a,null)),r.a.createElement(g.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input a password, minimum 8 characters.",min:8}]},r.a.createElement(k.a.Password,null)),r.a.createElement(g.a.Item,{label:"Repeat your password:",name:"password2",rules:[{required:!0,message:"Please input your password again"}]},r.a.createElement(k.a.Password,null)),r.a.createElement(g.a.Item,{name:"email",label:"E-mail",rules:[{required:!0}]},r.a.createElement(k.a,{type:"email"})),r.a.createElement(g.a.Item,{name:"bankaccount",label:"Deposit account",rules:[{required:!0,message:"This is not a valid IBAN"},function(e){e.getFieldValue;return{validator:function(e,t){return/^([A-Z]{2}[ \-]?[0-9]{2})(?=(?:[ \-]?[A-Z0-9]){9,30}$)((?:[ \-]?[A-Z0-9]{3,5}){2,7})([ \-]?[A-Z0-9]{1,3})?$/.test(t)&&function(e){var t=e.replace(/[^A-Z0-9]+/gi,"").toUpperCase().match(/^([A-Z]{2})([0-9]{2})([A-Z0-9]{9,30})$/);return!!t&&1===(t[3]+t[1]+t[2]).replace(/[A-Z]/g,(function(e){return e.charCodeAt(0)-55})).match(/\d{1,7}/g).reduce((function(e,t){return Number(e+t)%97}),"")}(t)?Promise.resolve():Promise.reject("This is not a valid IBAN")}}}]},r.a.createElement(k.a,null)),r.a.createElement(g.a.Item,{name:"prefaccbank",label:"Account bank",rules:[{required:!0,message:"Please, select a bank"}]},r.a.createElement(T.default.Group,null,r.a.createElement(T.default,{value:"BBVA"},"BBVA"),r.a.createElement(T.default,{value:"Santander"},"Santander"))),r.a.createElement(g.a.Item,{name:"shopid",label:"Payment identifier",rules:[{required:!0}]},r.a.createElement(k.a,null)),r.a.createElement(g.a.Item,{name:"redirecturi",label:"Your redirection URI",rules:[{required:!0}]},r.a.createElement(k.a,null)),r.a.createElement(g.a.Item,{label:"Banks"},r.a.createElement(g.a.Item,{name:"bancos",valuePropName:"checked",noStyle:!0},r.a.createElement(x.a.Group,{options:["BBVA","Santander"]}))),r.a.createElement(g.a.Item,Object.assign({name:"agreement",valuePropName:"checked",rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject("You have to accept our privacy policy")}}]},e),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(x.a,null,"You have to review and accept our"),r.a.createElement("a",{onClick:this.showModal},"privacy policy")))),r.a.createElement(g.a.Item,e,r.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Create account"),r.a.createElement(E.a,{type:"primary"},r.a.createElement(w.b,{to:"/"},"Return")))),r.a.createElement("div",null,this.state.errorpwd),r.a.createElement(f.a,{title:"Privacy policy",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("h2",null,"Privacy policy"),r.a.createElement("p",null,"This site uses cookies and stores some information in order to provide its service. By accepting this privacy policy you give your consent for the next treatments:",r.a.createElement("br",null),"-Store the banking information you wish to access through this webpage",r.a.createElement("br",null),"-Use cookies in order to allow payments and other services to take place",r.a.createElement("br",null),"More precisely, the information stored will be the information you provide during registration, and the accounts and movements of these accounts that you access throught this platform.",r.a.createElement("br",null),"This information will be stored and will not used for any other intents and purposes.",r.a.createElement("br",null),"If you feel any of this is unlawful according to GDPR regulation, you may contact the ",r.a.createElement("a",{href:"https://www.aepd.es/es"},"AEPD")," (ES).")))}}]),a}(r.a.Component),P=a(540),B=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ListComponent"},r.a.createElement(d.a,{type:"flex"},r.a.createElement(b.a,null,r.a.createElement("p",null,"IBAN:",this.props.cuenta.iban)," ",r.a.createElement("p",null,"Balances: ",this.props.cuenta.balances.map((function(e){return r.a.createElement("span",null,e.balanceAmount.amount," ",e.balanceAmount.currency)})))),r.a.createElement(b.a,null,r.a.createElement(E.a,{type:"primary",onClick:function(){e.props.setTransactions(!1,e.props.cuenta.resourceId,e.props.cuenta.iban,"Account transactions",e.props.bank)}},"Show transactions"))))}}]),a}(r.a.Component),D=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ListComponent"},r.a.createElement(d.a,{type:"flex"},r.a.createElement(b.a,null,r.a.createElement("p",null,"IBAN:",this.props.cuenta.iban)," ",r.a.createElement("p",null,"Balances: ",this.props.cuenta.balances[0].balanceAmount.amount," ",this.props.cuenta.balances[0].balanceAmount.currency)),r.a.createElement(b.a,null,r.a.createElement(E.a,{type:"primary",onClick:function(){e.props.setTransactions(!1,e.props.cuenta.resourceId,e.props.cuenta.iban,"Account transactions",e.props.bank)}},"Show transactions"))))}}]),a}(r.a.Component),U=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).showSpinner=n.showSpinner.bind(Object(c.a)(n)),n.state={banco:"",cuentas:[],error:"",showSpin:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.post("/accounts",{bank:e.props.banco}).then((function(t){200!==t.status?e.setState({error:"An error has ocurred, try again later.",showSpin:!1}):e.setState({cuentas:t.data.accs,showSpin:!1})})).catch((function(t){e.setState({error:"An error has ocurred, try again later.",showSpin:!1})}))}},{key:"showSpinner",value:function(){return this.state.showSpin?r.a.createElement(P.a,null):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.error,this.showSpinner(),this.state.cuentas.map((function(t,a){return"BBVA"===e.props.banco?r.a.createElement(B,{cuenta:t,bank:e.props.banco,setTransactions:e.props.setTransactions}):"Santander"===e.props.banco?r.a.createElement(D,{cuenta:t,bank:e.props.banco,setTransactions:e.props.setTransactions}):null})))}}]),a}(r.a.Component),L=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"show",value:function(e,t){var a=this;return e?r.a.createElement("div",null,r.a.createElement(U,{banco:t,setTransactions:this.props.setTransactions})):r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",onClick:function(){a.authBanco(t)}},"Log-in to the bank"))}},{key:"authBanco",value:function(e){window.location.href="/bankAuth?bank=".concat(e)}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.id,this.show(this.props.auth,this.props.id))}}]),a}(r.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).reembolso=n.reembolso.bind(Object(c.a)(n)),n.prevTwenty=n.prevTwenty.bind(Object(c.a)(n)),n.nextTwenty=n.nextTwenty.bind(Object(c.a)(n)),n.showSpinner=n.showSpinner.bind(Object(c.a)(n)),n.state={errorpwd:"",tx:[],page:0,buttonLeft:!1,buttonRight:!1,showSpin:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.post("/movements",{bank:this.props.bank,iban:this.props.rid}).then((function(t){200===t.status?e.setState({tx:t.data.tx,errorpwd:"",showSpin:!1}):e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})})).catch((function(t){console.log("Error"),e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})}))}},{key:"reembolso",value:function(e){this.setState({errorpwd:""});var t=this,a=this.props.user;C.a.post("/pisp",{user:a,txid:e.id,amount:e.transactionAmount.amount,destacc:e.debtorAccount.iban,credname:e.debtorName}).then((function(e){200!==e.status?t.setState({errorpwd:"The reinbursement could not be made, please try again.",showSpin:!1}):t.setState({errorpwd:"Reinbursement successful!",showSpin:!1})})).catch((function(e){console.log("Error"),t.setState({errorpwd:"The reinbursement could not be made, please try again.",showSpin:!1})}))}},{key:"prevTwenty",value:function(){var e=this,t=this.state.page;if(e.setState({tx:[],showSpin:!0}),t>0){var a=t-1,n=20*(t-1);C.a.post("/getmovements",{bank:this.props.bank,iban:this.props.rid,offset:n}).then((function(t){200===t.status?e.setState({tx:t.data.tx,errorpwd:"",page:a,showSpin:!1}):e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})})).catch((function(t){console.log("Error"),e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})}))}else this.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})}},{key:"nextTwenty",value:function(){var e=this;if(e.setState({tx:[],showSpin:!0}),this.state.tx.length>=20){var t=this.state.page,a=t+1,n=20*(t+1);C.a.get("/getmovements",{bank:this.props.bank,iban:this.props.rid,offset:n}).then((function(t){200===t.status?t.data.tx.length>0?e.setState({tx:t.data.tx,errorpwd:"",page:a}):e.setState({errorpwd:"There are no more transactions",showSpin:!1}):e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})})).catch((function(t){console.log("Error"),e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})}))}else this.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})}},{key:"show",value:function(e){var t=this;return"BBVA"===this.props.bank?e.creditorAccount.iban===this.props.iban?r.a.createElement("div",null,r.a.createElement("p",null,"Transaction ID: ",e.transactionId,r.a.createElement("br",null)," Concept: ",e.remittanceInformationStructured,r.a.createElement("br",null)," Amount: ",e.transactionAmount.amount,r.a.createElement("br",null)," Date: ",e.valueDate,r.a.createElement("br",null)," Debtor: ",e.debtorName,r.a.createElement("br",null)," Creditor: ",e.creditorName," "),r.a.createElement(E.a,{type:"primary",onClick:function(){t.reembolso(e)}},"Reimburse")):r.a.createElement("div",null,r.a.createElement("p",null,"Transaction ID: ",e.transactionId,r.a.createElement("br",null)," Concept: ",e.remittanceInformationStructured,r.a.createElement("br",null)," Amount: ",e.transactionAmount.amount,r.a.createElement("br",null)," Date: ",e.valueDate,r.a.createElement("br",null)," Debtor: ",e.debtorName,r.a.createElement("br",null)," Creditor: ",e.creditorName," ")):"Santander"===this.props.bank?r.a.createElement("div",null,r.a.createElement("p",null,"Concept: ",e.remittanceInformationUnstructured,r.a.createElement("br",null)," Amount: ",e.transactionAmount.amount,r.a.createElement("br",null)," Date: ",e.valueDate)):null}},{key:"showSpinner",value:function(){return this.state.showSpin?r.a.createElement(P.a,null):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Transacciones"),this.state.errorpwd,r.a.createElement("h2",null,"Lista de transacciones:"),this.showSpinner(),this.state.tx.map((function(t,a){return r.a.createElement("div",{className:"ListComponent"},e.show(t))})),r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",disabled:0===this.state.page,onClick:function(){e.prevTwenty()}},"<"),this.state.page,r.a.createElement(E.a,{type:"primary",disabled:this.state.tx.length<20,onClick:function(){e.nextTwenty()}},">")))}}]),a}(r.a.Component),W=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).show=n.show.bind(Object(c.a)(n)),n.showSpinner=n.showSpinner.bind(Object(c.a)(n)),n.setTransactions=n.setTransactions.bind(Object(c.a)(n)),n.state={banks:[],showbanks:!0,iban:"",rid:"",title:"Accounts",txBank:"",showSpin:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.get("/banks").then((function(t){200===t.status?e.setState({banks:t.data.banks,showSpin:!1}):e.setState({errorpwd:"An error has ocurred, please try again later.",showSpin:!1})})).catch((function(e){console.log("Error")}))}},{key:"setTransactions",value:function(e,t,a,n,r){this.setState({showbanks:e,rid:t,iban:a,title:n,txBank:r})}},{key:"show",value:function(e){var t=this;return JSON.parse(e)?this.state.banks.map((function(e,a){return r.a.createElement(L,{id:e.bank,auth:e.auth,setTransactions:t.setTransactions})})):r.a.createElement(N,{bank:this.state.txBank,rid:this.state.rid,iban:this.state.iban,setTransactions:this.setTransactions})}},{key:"showSpinner",value:function(){return this.state.showSpin?r.a.createElement(P.a,null):null}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.title),this.showSpinner(),this.show(this.state.showbanks))}}]),a}(r.a.Component),R=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).reembolso=n.reembolso.bind(Object(c.a)(n)),n.prevTwenty=n.prevTwenty.bind(Object(c.a)(n)),n.nextTwenty=n.nextTwenty.bind(Object(c.a)(n)),n.showSpinner=n.showSpinner.bind(Object(c.a)(n)),n.state={errorpwd:"",tx:[],page:0,buttonLeft:!1,buttonRight:!1,showSpin:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.get("/tx?offset=0").then((function(t){200===t.status?e.setState({tx:t.data.tx,errorpwd:"",showSpin:!1}):e.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})})).catch((function(t){console.log("Error"),e.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})}))}},{key:"reembolso",value:function(e){this.setState({errorpwd:""});var t=this,a=this.props.user;C.a.post("/pisp",{user:a,txid:e.id,amount:e.amount,destacc:e.debtor}).then((function(e){200===e.status&&(window.location.href=e.data.href,t.setState({errorpwd:""}))})).catch((function(e){console.log("Error"),t.setState({errorpwd:"The reinbursement has failed, try again later."})}))}},{key:"prevTwenty",value:function(){var e=this,t=this.state.page;if(e.setState({tx:[],showSpin:!0}),t>0){var a=t-1,n=20*(t-1);C.a.get("/tx?offset=".concat(n)).then((function(t){200===t.status?e.setState({tx:t.data.tx,errorpwd:"",page:a,showSpin:!1}):e.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})})).catch((function(t){console.log("Error"),e.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})}))}else this.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})}},{key:"show",value:function(e){var t=this;return void 0!==e.debtor?r.a.createElement("div",null,r.a.createElement("p",null," Transaction ID: ",e.id,r.a.createElement("br",null)," Amount: ",e.amount,r.a.createElement("br",null)," Date: ",e.date,r.a.createElement("br",null)," Debtor: ",e.debtor),r.a.createElement(E.a,{type:"primary",onClick:function(){t.reembolso(e)}},"Reimburse")):r.a.createElement("div",null,r.a.createElement("p",null," Transaction ID: ",e.id,r.a.createElement("br",null)," Amount: ",e.amount,r.a.createElement("br",null)," Date: ",e.date))}},{key:"nextTwenty",value:function(){var e=this;if(e.setState({tx:[],showSpin:!0}),this.state.tx.length>=20){var t=this.state.page,a=t+1,n=20*(t+1);C.a.get("/tx?offset=".concat(n)).then((function(t){200===t.status?t.data.tx.length>0?e.setState({tx:t.data.tx,errorpwd:"",page:a,showSpin:!1}):e.setState({errorpwd:"There are no more transactions.",showSpin:!1}):e.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})})).catch((function(t){console.log("Error"),e.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})}))}else this.setState({errorpwd:"An error has ocurred, try again later.",showSpin:!1})}},{key:"showSpinner",value:function(){return this.state.showSpin?r.a.createElement(P.a,null):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Transactions"),this.state.errorpwd,r.a.createElement("h2",null,"Transaction list:"),this.showSpinner(),this.state.tx.map((function(t,a){return r.a.createElement("div",{className:"ListComponent"},e.show(t))})),r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",disabled:0===this.state.page,onClick:function(){e.prevTwenty()}},"<"),this.state.page,r.a.createElement(E.a,{type:"primary",disabled:this.state.tx.length<20,onClick:function(){e.nextTwenty()}},">")))}}]),a}(r.a.Component),V=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).show=n.show.bind(Object(c.a)(n)),n.state={transactions:!1,accounts:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){JSON.parse(this.props.logged)||(window.location.href="/login")}},{key:"componentDidUpdate",value:function(e,t,a){this.props.logged===e.logged||JSON.parse(this.props.logged)||(window.location.href="/")}},{key:"show",value:function(e,t){var a=this;return e?r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",onClick:function(){return a.setState({transactions:!1,accounts:!1})}},"Return"),r.a.createElement(R,{user:this.props.user})):t?r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",onClick:function(){return a.setState({transactions:!1,accounts:!1})}},"Return"),r.a.createElement(W,null)):r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",onClick:function(){return a.setState({transactions:!0,accounts:!1})}},"Transactions"),r.a.createElement(E.a,{type:"primary",onClick:function(){return a.setState({transactions:!1,accounts:!0})}},"Accounts"))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,this.props.user,"'s personal page"),this.show(this.state.transactions,this.state.accounts))}}]),a}(r.a.Component),q=a(546),F=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(c.a)(n)),n.onSelect=n.onSelect.bind(Object(c.a)(n)),n.state={serviceSVA:!0,afterpayment:!1,status:"",bankid:"",storeid:"",amount:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.get("/checkservice").then((function(t){"SVA"===t.data.service?e.setState({serviceSVA:!0}):"payment"===t.data.service?e.setState({serviceSVA:!1}):"post"===t.data.service?e.setState({afterpayment:!0,status:t.data.status,bankid:t.data.bankid,storeid:t.data.storeid,amount:t.data.amount}):(C.a.get("/logout"),window.location.href="/")})).catch((function(e){C.a.get("/logout"),window.location.href="/"}))}},{key:"logout",value:function(){this.state.afterpayment?C.a.get("/endpayment").then((function(e){window.location.href=e.data.href})).catch((function(e){console.log("Error"),C.a.get("/logout"),window.location.href="/"})):C.a.get("/logout?step=pay").then((function(e){window.location.href=e.data.href})).catch((function(e){console.log("Error"),C.a.get("/logout"),window.location.href="/"}))}},{key:"onSelect",value:function(e){this.setState({errorpwd:""}),this.state.serviceSVA?window.location.href="/payment?bank=".concat(e.bank):window.location.href="/payment"}},{key:"show",value:function(){return this.state.afterpayment?"success"===this.state.status?r.a.createElement("div",null,r.a.createElement("p",null,"Welcome back to InstantPay!",r.a.createElement("br",null),"The payment was a success!",r.a.createElement("br",null),"Amount: ",this.state.amount," plus any amount the bank may have charged",r.a.createElement("br",null),"Bank payment identifier:",this.state.bankid,r.a.createElement("br",null),"Store payment identifier:",this.state.storeid,r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(g.a,{onFinish:this.onSelect},r.a.createElement(g.a.Item,null,r.a.createElement(E.a,{type:"primary",onClick:this.logout},"End payment process")))):r.a.createElement("div",null,r.a.createElement("p",null,"Welcome back to InstantPay!",r.a.createElement("br",null),"The payment could not be executed",r.a.createElement("br",null),"Bank payment identifier:",this.state.bankid,r.a.createElement("br",null),"Store payment identifier:",this.state.storeid,r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(g.a,{onFinish:this.onSelect},r.a.createElement(g.a.Item,null,r.a.createElement(E.a,{type:"primary",onClick:this.logout},"End payment process")))):this.state.serviceSVA?r.a.createElement("div",null,r.a.createElement("p",null,"Welcome to InstantPay!",r.a.createElement("br",null),"The payment you're about to execute is executed in a matter of minutes",r.a.createElement("br",null),"This platform does not charge you for the service it provides",r.a.createElement("br",null),"In order to proceed, choose your bank, check the privacy policies",r.a.createElement("br",null),"and press submit.",r.a.createElement("br",null),r.a.createElement("br",null),"In case you need to contact us, use our email: instantpay@instantpay.es",r.a.createElement("br",null),"Or our physical address: placeholder",r.a.createElement("br",null),"In Spain, the local authority is the BDE: ",r.a.createElement("a",{href:"https://www.bde.es/bde/es/"},"BDE"),r.a.createElement("br",null),"This webpage uses cookies in order to provide the payment service,",r.a.createElement("br",null),"these cookies will be deleted once the payment has been processed,",r.a.createElement("br",null),"but some information, such as your bank account, will be stored in order",r.a.createElement("br",null),"to allow the store to reimburse you.",r.a.createElement("br",null),"If you do not agree with these requirements, feel free to press cancel,",r.a.createElement("br",null),"you will be redirected back to the store. If you feel this is unlawful",r.a.createElement("br",null),"based on the GDPR, you can contact the ",r.a.createElement("a",{href:"https://www.aepd.es/es"},"AEPD")," (ES)."),r.a.createElement(g.a,{onFinish:this.onSelect},r.a.createElement(g.a.Item,{name:"bank",label:"Bank",rules:[{required:!0,message:"Please, select a bank"}]},r.a.createElement(T.default.Group,null,r.a.createElement(T.default,{value:"BBVA"},"BBVA"),r.a.createElement(T.default,{value:"Santander"},"Santander"))),r.a.createElement(g.a.Item,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(E.a,{type:"primary",onClick:this.logout},"Cancel")))):r.a.createElement("div",null,r.a.createElement("p",null,"Welcome to InstantPay!",r.a.createElement("br",null),"The payment you're about to execute is executed in a matter of minutes",r.a.createElement("br",null),"This platform does not charge you for the service it provides",r.a.createElement("br",null),"In order to proceed, check the privacy policies and press submit.",r.a.createElement("br",null),r.a.createElement("br",null),"This webpage uses cookies in order to provide the payment service,",r.a.createElement("br",null),"these cookies will be deleted once the payment has been processed,",r.a.createElement("br",null),"but some information, such as your bank account, will be stored in order",r.a.createElement("br",null),"to allow the store to reimburse you.",r.a.createElement("br",null),"If you do not agree with these requirements, feel free to press cancel,",r.a.createElement("br",null),"you will be redirected back to the store. If you feel this is unlawful",r.a.createElement("br",null),"based on the GDPR, you can contact the ",r.a.createElement("a",{href:"https://www.aepd.es/es"},"AEPD")," (ES)."),r.a.createElement(g.a,{onFinish:this.onSelect},r.a.createElement(g.a.Item,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(E.a,{type:"primary",onClick:this.logout},"Cancel"))))}},{key:"render",value:function(){return r.a.createElement(q.a,null,this.show(),r.a.createElement("div",null,this.state.errorpwd))}}]),a}(r.a.Component),K=a(541),G=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({visible:!0})},n.handleOk=function(e){console.log(e),n.setState({visible:!1})},n.handleCancel=function(e){console.log(e),n.setState({visible:!1})},n.handleCookieOk=function(e){console.log(e),n.props.cookies.set("cookies",!1),n.setState({cookiesvisible:!1})},n.handleCookieCancel=function(e){console.log(e),n.setState({cookiesvisible:!1})};var r=e.cookies;return n.changeLoginStatus=n.changeLoginStatus.bind(Object(c.a)(n)),n.setUser=n.setUser.bind(Object(c.a)(n)),n.showModal=n.showModal.bind(Object(c.a)(n)),n.handleOk=n.handleOk.bind(Object(c.a)(n)),n.handleCancel=n.handleCancel.bind(Object(c.a)(n)),n.handleCookieOk=n.handleCookieOk.bind(Object(c.a)(n)),n.handleCookieCancel=n.handleCookieCancel.bind(Object(c.a)(n)),n.showUnlogButton=n.showUnlogButton.bind(Object(c.a)(n)),n.state={logged:r.get("logged")||!1,username:r.get("username")||"",error:"",visible:!1,cookiesvisible:r.get("cookies")||!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.get("/logged").catch((function(t){e.props.cookies;e.changeLoginStatus(!1),e.setUser("")}))}},{key:"changeLoginStatus",value:function(e){var t=this.props.cookies;this.setState({logged:e}),t.set("logged",e)}},{key:"setUser",value:function(e){var t=this.props.cookies;this.setState({username:String(e)}),t.set("username",e)}},{key:"showUnlogButton",value:function(){var e=this;return JSON.parse(this.state.logged)?r.a.createElement(d.a,null,r.a.createElement(b.a,null,r.a.createElement(E.a,{type:"primary",onClick:this.showModal},"Configuration")),r.a.createElement(b.a,null,r.a.createElement(E.a,{type:"primary",onClick:function(){C.a.get("/logout").then((function(t){200===t.status?(e.changeLoginStatus(!1),e.setUser("")):e.setState({error:"Log-out failed!"})})).catch((function(e){this.setState({error:"Log-out failed!"})}))}},"Log-out"))):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{className:"Header"},r.a.createElement(b.a,{span:1}),r.a.createElement(b.a,null,r.a.createElement("img",{className:"Logo",src:m.a})),r.a.createElement(b.a,null,r.a.createElement("h1",null,"InstantPay")),r.a.createElement(b.a,null,"Welcome to the future of banking!"),r.a.createElement(b.a,null,this.state.error),r.a.createElement(b.a,{span:4},this.showUnlogButton()),r.a.createElement(b.a,{span:1})),r.a.createElement("header",{className:"App-header"},r.a.createElement(w.a,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/payments",component:F}),r.a.createElement(y.a,{path:"/main",render:function(t){return r.a.createElement(V,Object.assign({},t,{logged:e.state.logged,user:e.state.username}))}}),r.a.createElement(y.a,{path:"/login",render:function(t){return r.a.createElement(j,Object.assign({},t,{changeLoginStatus:e.changeLoginStatus,setUser:e.setUser}))}}),r.a.createElement(y.a,{path:"/register",component:I}),r.a.createElement(y.a,{path:"/",render:function(t){return r.a.createElement(v,Object.assign({},t,{logged:e.state.logged}))}})))),r.a.createElement(f.a,{title:"Configuration",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("p",null,"Form that allows to modify account data"),r.a.createElement("p",null,"Button that allows to delete the account after asking for the password"),r.a.createElement("p",null,"Link to the privacy policy")),r.a.createElement(f.a,{title:"Cookies",visible:JSON.parse(this.state.cookiesvisible),onOk:this.handleCookieOk,onCancel:this.handleCookieCancel},r.a.createElement("p",null,"This service uses cookies in order to make it easier to use."),r.a.createElement("p",null,"You can check our ",r.a.createElement("a",null,"Privacy policy")," in order to obtain more information."),r.a.createElement("p",null,"Press OK if you allow the use of cookies.")))}}]),a}(r.a.Component),Y=Object(K.a)(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(542);s.a.render(r.a.createElement(Z.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[262,1,2]]]);
//# sourceMappingURL=main.7f85efd6.chunk.js.map